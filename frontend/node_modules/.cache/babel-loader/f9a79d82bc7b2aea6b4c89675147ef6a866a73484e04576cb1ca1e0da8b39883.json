{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{motion}from'framer-motion';import{XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,LineChart,Line}from'recharts';import{Leaf,TrendingDown,Target,Award,Calendar,Zap}from'lucide-react';import{apiService}from'../services/api';import InsightCard from'./InsightCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[retryCount,setRetryCount]=useState(0);const fetchDashboardData=useCallback(async function(){let isRetry=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{if(!isRetry){setLoading(true);setError(null);}const data=await apiService.getDashboardData();setDashboardData(data);setRetryCount(0);// Reset retry count on success\n}catch(err){var _err$response,_err$response2,_err$response3,_err$response4;console.error('Dashboard data fetch error:',err);// Handle different types of errors\nlet errorMessage='대시보드 데이터를 불러오는 데 실패했습니다.';if((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401||(err===null||err===void 0?void 0:(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===403){errorMessage='인증이 필요합니다. 다시 로그인해주세요.';}else if((err===null||err===void 0?void 0:(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===500){errorMessage='서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.';}else if((err===null||err===void 0?void 0:err.code)==='NETWORK_ERROR'||!navigator.onLine){errorMessage='네트워크 연결을 확인해주세요.';}setError(errorMessage);// Auto-retry up to 3 times for network/server errors\nif(retryCount<3&&((err===null||err===void 0?void 0:(_err$response4=err.response)===null||_err$response4===void 0?void 0:_err$response4.status)>=500||(err===null||err===void 0?void 0:err.code)==='NETWORK_ERROR')){setTimeout(()=>{console.log(`Retrying dashboard fetch... (attempt ${retryCount+1})`);setRetryCount(prev=>prev+1);fetchDashboardData(true);},2000*(retryCount+1));// Exponential backoff\n}}finally{setLoading(false);}},[retryCount]);// Include retryCount in useCallback dependency\nuseEffect(()=>{fetchDashboardData();},[fetchDashboardData]);// Now fetchDashboardData is stable\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"})});}if(error||!dashboardData){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDashboardData(false),className:\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\",children:\"\\uB2E4\\uC2DC \\uC2DC\\uB3C4\"})]})});}const{stats,carbon_trends,top_contributors,insights}=dashboardData;return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"\\uC548\\uB155\\uD558\\uC138\\uC694! \\uC624\\uB298\\uB3C4 \\uC9C0\\uAD6C\\uB97C \\uC9C0\\uCF1C\\uBD10\\uC694 \\uD83C\\uDF0D\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\uC774\\uBC88 \\uC8FC \\uD0C4\\uC18C \\uC808\\uC57D\\uB7C9\\uACFC \\uD65C\\uB3D9\\uC744 \\uD655\\uC778\\uD574\\uBCF4\\uC138\\uC694\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"\\uC774\\uBC88 \\uC8FC \\uD0C4\\uC18C \\uBC30\\uCD9C\",value:`${stats.total_carbon_this_week.toFixed(1)}kg`,icon:/*#__PURE__*/_jsx(Leaf,{className:\"w-6 h-6\"}),color:\"green\",subtitle:\"CO\\u2082e\"}),/*#__PURE__*/_jsx(StatCard,{title:\"\\uD0C4\\uC18C \\uC808\\uC57D\\uB7C9\",value:`${stats.carbon_reduction_achieved.toFixed(1)}kg`,icon:/*#__PURE__*/_jsx(TrendingDown,{className:\"w-6 h-6\"}),color:\"blue\",subtitle:\"\\uC2A4\\uB9C8\\uD2B8 \\uC2A4\\uC651\\uC73C\\uB85C\"}),/*#__PURE__*/_jsx(StatCard,{title:\"\\uBAA9\\uD45C \\uB2EC\\uC131\\uB960\",value:`${stats.target_progress_percentage.toFixed(0)}%`,icon:/*#__PURE__*/_jsx(Target,{className:\"w-6 h-6\"}),color:\"purple\",subtitle:\"\\uC774\\uBC88 \\uB2EC\"}),/*#__PURE__*/_jsx(StatCard,{title:\"\\uD65C\\uC131 \\uCC4C\\uB9B0\\uC9C0\",value:stats.active_challenges.toString(),icon:/*#__PURE__*/_jsx(Award,{className:\"w-6 h-6\"}),color:\"orange\",subtitle:\"\\uCC38\\uC5EC \\uC911\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:\"bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5 mr-2 text-green-500\"}),\"\\uC8FC\\uAC04 \\uD0C4\\uC18C \\uBC1C\\uC790\\uAD6D \\uD2B8\\uB80C\\uB4DC\"]}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{data:carbon_trends,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\",tick:{fontSize:12},tickFormatter:value=>{const date=new Date(value);return`${date.getMonth()+1}/${date.getDate()}`;}}),/*#__PURE__*/_jsx(YAxis,{tick:{fontSize:12}}),/*#__PURE__*/_jsx(Tooltip,{labelFormatter:value=>`날짜: ${value}`,formatter:value=>[`${value.toFixed(2)}kg CO₂e`,'탄소 배출량']}),/*#__PURE__*/_jsx(Line,{type:\"monotone\",dataKey:\"carbon_amount\",stroke:\"#10b981\",strokeWidth:3,dot:{fill:'#10b981',strokeWidth:2,r:4}})]})})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:\"bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Zap,{className:\"w-5 h-5 mr-2 text-orange-500\"}),\"\\uD0C4\\uC18C \\uBC30\\uCD9C \\uC0C1\\uC704 \\uC74C\\uC2DD\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:top_contributors.slice(0,5).map((contributor,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white ${index===0?'bg-red-500':index===1?'bg-orange-500':index===2?'bg-yellow-500':'bg-gray-400'}`,children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:contributor.food_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[contributor.frequency,\"\\uD68C \\uC12D\\uCDE8\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold text-gray-800\",children:[contributor.total_carbon.toFixed(1),\"kg\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"CO\\u2082e\"})]})]},index))})]})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-6\",children:\"\\uAC1C\\uC778\\uD654\\uB41C \\uC778\\uC0AC\\uC774\\uD2B8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:insights.map((insight,index)=>/*#__PURE__*/_jsx(InsightCard,{insight:insight},index))})]})]})});};const StatCard=_ref=>{let{title,value,icon,color,subtitle}=_ref;const colorClasses={green:'bg-green-500',blue:'bg-blue-500',purple:'bg-purple-500',orange:'bg-orange-500'};return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:`${colorClasses[color]} text-white p-3 rounded-lg`,children:icon})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-600 mb-1\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-800\",children:value}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:subtitle})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useCallback","motion","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","LineChart","Line","Leaf","TrendingDown","Target","Award","Calendar","Zap","apiService","InsightCard","jsx","_jsx","jsxs","_jsxs","Dashboard","dashboardData","setDashboardData","loading","setLoading","error","setError","retryCount","setRetryCount","fetchDashboardData","isRetry","arguments","length","undefined","data","getDashboardData","err","_err$response","_err$response2","_err$response3","_err$response4","console","errorMessage","response","status","code","navigator","onLine","setTimeout","log","prev","className","children","onClick","stats","carbon_trends","top_contributors","insights","div","initial","opacity","y","animate","StatCard","title","value","total_carbon_this_week","toFixed","icon","color","subtitle","carbon_reduction_achieved","target_progress_percentage","active_challenges","toString","x","width","height","strokeDasharray","dataKey","tick","fontSize","tickFormatter","date","Date","getMonth","getDate","labelFormatter","formatter","type","stroke","strokeWidth","dot","fill","r","slice","map","contributor","index","food_name","frequency","total_carbon","insight","_ref","colorClasses","green","blue","purple","orange","whileHover","scale"],"sources":["/Users/kimchung-yeon/인개인개/커서뭐될래/greenflow/frontend/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  XAxis, \n  YAxis, \n  CartesianGrid, \n  Tooltip, \n  ResponsiveContainer,\n  LineChart,\n  Line\n} from 'recharts';\nimport { \n  Leaf, \n  TrendingDown, \n  Target, \n  Award,\n  Calendar,\n  Zap\n} from 'lucide-react';\nimport { DashboardData } from '../types';\nimport { apiService } from '../services/api';\nimport InsightCard from './InsightCard';\n\nconst Dashboard: React.FC = () => {\n  const [dashboardData, setDashboardData] = useState<DashboardData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [retryCount, setRetryCount] = useState(0);\n\n  const fetchDashboardData = useCallback(async (isRetry: boolean = false) => {\n    try {\n      if (!isRetry) {\n        setLoading(true);\n        setError(null);\n      }\n      \n      const data = await apiService.getDashboardData();\n      setDashboardData(data);\n      setRetryCount(0); // Reset retry count on success\n    } catch (err: any) {\n      console.error('Dashboard data fetch error:', err);\n      \n      // Handle different types of errors\n      let errorMessage = '대시보드 데이터를 불러오는 데 실패했습니다.';\n      \n      if (err?.response?.status === 401 || err?.response?.status === 403) {\n        errorMessage = '인증이 필요합니다. 다시 로그인해주세요.';\n      } else if (err?.response?.status === 500) {\n        errorMessage = '서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.';\n      } else if (err?.code === 'NETWORK_ERROR' || !navigator.onLine) {\n        errorMessage = '네트워크 연결을 확인해주세요.';\n      }\n      \n      setError(errorMessage);\n      \n      // Auto-retry up to 3 times for network/server errors\n      if (retryCount < 3 && (err?.response?.status >= 500 || err?.code === 'NETWORK_ERROR')) {\n        setTimeout(() => {\n          console.log(`Retrying dashboard fetch... (attempt ${retryCount + 1})`);\n          setRetryCount(prev => prev + 1);\n          fetchDashboardData(true);\n        }, 2000 * (retryCount + 1)); // Exponential backoff\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [retryCount]); // Include retryCount in useCallback dependency\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [fetchDashboardData]); // Now fetchDashboardData is stable\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500\"></div>\n      </div>\n    );\n  }\n\n  if (error || !dashboardData) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-red-500 mb-4\">{error}</p>\n          <button \n            onClick={() => fetchDashboardData(false)}\n            className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\"\n          >\n            다시 시도\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const { stats, carbon_trends, top_contributors, insights } = dashboardData;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 p-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <motion.div \n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-8\"\n        >\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\n            안녕하세요! 오늘도 지구를 지켜봐요 🌍\n          </h1>\n          <p className=\"text-gray-600\">\n            이번 주 탄소 절약량과 활동을 확인해보세요\n          </p>\n        </motion.div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          <StatCard\n            title=\"이번 주 탄소 배출\"\n            value={`${stats.total_carbon_this_week.toFixed(1)}kg`}\n            icon={<Leaf className=\"w-6 h-6\" />}\n            color=\"green\"\n            subtitle=\"CO₂e\"\n          />\n          <StatCard\n            title=\"탄소 절약량\"\n            value={`${stats.carbon_reduction_achieved.toFixed(1)}kg`}\n            icon={<TrendingDown className=\"w-6 h-6\" />}\n            color=\"blue\"\n            subtitle=\"스마트 스왑으로\"\n          />\n          <StatCard\n            title=\"목표 달성률\"\n            value={`${stats.target_progress_percentage.toFixed(0)}%`}\n            icon={<Target className=\"w-6 h-6\" />}\n            color=\"purple\"\n            subtitle=\"이번 달\"\n          />\n          <StatCard\n            title=\"활성 챌린지\"\n            value={stats.active_challenges.toString()}\n            icon={<Award className=\"w-6 h-6\" />}\n            color=\"orange\"\n            subtitle=\"참여 중\"\n          />\n        </div>\n\n        {/* Charts Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n          {/* Carbon Trend Chart */}\n          <motion.div \n            initial={{ opacity: 0, x: -20 }}\n            animate={{ opacity: 1, x: 0 }}\n            className=\"bg-white rounded-xl shadow-lg p-6\"\n          >\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\n              <Calendar className=\"w-5 h-5 mr-2 text-green-500\" />\n              주간 탄소 발자국 트렌드\n            </h3>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={carbon_trends}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis \n                  dataKey=\"date\" \n                  tick={{ fontSize: 12 }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return `${date.getMonth() + 1}/${date.getDate()}`;\n                  }}\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip \n                  labelFormatter={(value) => `날짜: ${value}`}\n                  formatter={(value: number) => [`${value.toFixed(2)}kg CO₂e`, '탄소 배출량']}\n                />\n                <Line \n                  type=\"monotone\" \n                  dataKey=\"carbon_amount\" \n                  stroke=\"#10b981\" \n                  strokeWidth={3}\n                  dot={{ fill: '#10b981', strokeWidth: 2, r: 4 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </motion.div>\n\n          {/* Top Contributors */}\n          <motion.div \n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n            className=\"bg-white rounded-xl shadow-lg p-6\"\n          >\n            <h3 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\n              <Zap className=\"w-5 h-5 mr-2 text-orange-500\" />\n              탄소 배출 상위 음식\n            </h3>\n            <div className=\"space-y-4\">\n              {top_contributors.slice(0, 5).map((contributor, index) => (\n                <div key={index} className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white ${\n                      index === 0 ? 'bg-red-500' : \n                      index === 1 ? 'bg-orange-500' : \n                      index === 2 ? 'bg-yellow-500' : 'bg-gray-400'\n                    }`}>\n                      {index + 1}\n                    </div>\n                    <div className=\"ml-3\">\n                      <p className=\"font-medium text-gray-800\">{contributor.food_name}</p>\n                      <p className=\"text-sm text-gray-600\">{contributor.frequency}회 섭취</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-gray-800\">{contributor.total_carbon.toFixed(1)}kg</p>\n                    <p className=\"text-sm text-gray-600\">CO₂e</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Insights Section */}\n        <motion.div \n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"mb-8\"\n        >\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-6\">개인화된 인사이트</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {insights.map((insight, index) => (\n              <InsightCard key={index} insight={insight} />\n            ))}\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\ninterface StatCardProps {\n  title: string;\n  value: string;\n  icon: React.ReactNode;\n  color: 'green' | 'blue' | 'purple' | 'orange';\n  subtitle: string;\n}\n\nconst StatCard: React.FC<StatCardProps> = ({ title, value, icon, color, subtitle }) => {\n  const colorClasses = {\n    green: 'bg-green-500',\n    blue: 'bg-blue-500',\n    purple: 'bg-purple-500',\n    orange: 'bg-orange-500'\n  };\n\n  return (\n    <motion.div \n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      whileHover={{ scale: 1.02 }}\n      className=\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"\n    >\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className={`${colorClasses[color]} text-white p-3 rounded-lg`}>\n          {icon}\n        </div>\n      </div>\n      <h3 className=\"text-sm font-medium text-gray-600 mb-1\">{title}</h3>\n      <p className=\"text-2xl font-bold text-gray-800\">{value}</p>\n      <p className=\"text-sm text-gray-500\">{subtitle}</p>\n    </motion.div>\n  );\n};\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}